/* ---------------------------
   THEME + GLOBAL
   --------------------------- */
:root{
  --bg1: #6a11cb; --bg2: #2575fc;
  --card: rgba(255,255,255,0.12);
  --text: #fff;
  --accent: #ffe600;
  --shadow: 0 10px 40px rgba(0,0,0,0.35);
}

* { box-sizing: border-box; }
body{
  margin:0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, var(--bg1), var(--bg2));
  color:var(--text);
  overflow-x:hidden;
}

/* ---------------------------
   MAIN LAYOUT
   --------------------------- */
.game-wrapper{
  max-width:480px;
  margin:28px auto;
  padding:18px;
  border-radius:18px;
  background: rgba(255,255,255,0.04);
  backdrop-filter: blur(6px);
  box-shadow: var(--shadow);
  position: relative;
  z-index: 2;
  text-align:center;
}

/* title */
.game-title{ font-size:2rem; margin-bottom:12px; font-weight:800; animation: titleFloat 2.5s ease-in-out infinite;}
@keyframes titleFloat{50%{transform:translateY(-6px);}}

/* scoreboard */
.scoreboard{ display:flex; gap:12px; margin-bottom:14px; justify-content:space-between; align-items:center;}
.score-box{
  flex:1;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px;
  border-radius:12px;
  background: rgba(255,255,255,0.06);
  font-weight:700;
}
.avatar-and-label{ display:flex; gap:10px; align-items:center;}
.avatar{ width:64px; height:64px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:900; background: linear-gradient(135deg,#fff3 0%, #fff1 100%); color:#222; box-shadow: 0 6px 16px rgba(0,0,0,0.18);}
.avatar.small{ width:44px; height:44px; font-size:1rem; }

/* ---------------------------
   BOARD + CELLS
   --------------------------- */
.board{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin: 8px auto;
  width: min(92vw, 380px);
  transition: transform 0.4s ease;
}
.board.win-shake{ animation: boardShake 0.45s ease-in-out; }

@keyframes boardShake{
  0%,100%{transform:translateX(0);}
  20%{transform:translateX(-6px);}
  40%{transform:translateX(6px);}
  60%{transform:translateX(-4px);}
  80%{transform:translateX(4px);}
}

.cell{
  background: var(--card);
  aspect-ratio:1/1;
  border-radius:16px;
  display:flex; align-items:center; justify-content:center;
  font-size:2.6rem; font-weight:800; cursor:pointer;
  transition: transform 180ms ease, background 180ms ease;
}
.cell:hover{ transform: scale(1.04) rotateX(8deg); background: rgba(255,255,255,0.14); }

/* winning cell */
.win-cell{
  background: linear-gradient(180deg, rgba(255,255,255,0.45), rgba(255,255,255,0.35));
  border: 2px solid rgba(255,255,255,0.9);
  animation: winPulse 1.2s infinite alternate;
}
@keyframes winPulse{
  0%{ box-shadow: 0 0 12px rgba(255,255,255,0.6), 0 0 24px rgba(255,220,87,0.25); transform: translateY(0); }
  100%{ box-shadow: 0 0 26px rgba(255,255,255,0.9), 0 0 56px rgba(255,220,87,0.35); transform: translateY(-4px); }
}

/* ---------------------------
   WINNER BOX (LEFT/RIGHT)
   --------------------------- */
.winner-box{
  margin-top:18px;
  padding:12px;
  border-radius:12px;
  background: rgba(255,255,255,0.12);
  display:flex; align-items:center; justify-content:space-between;
  gap:12px;
  z-index: 10;
  position: relative;
  animation: winnerEntrance 0.36s ease;
}
@keyframes winnerEntrance{ from{ transform: translateY(8px) scale(0.96); opacity:0 } to { transform:none; opacity:1; } }

.winner-X{ flex-direction: row; }
.winner-O{ flex-direction: row-reverse; }

/* winner GIF */
.winner-gif{ width: clamp(100px, 28vw, 170px); border-radius:12px; animation: gifBounce 1.3s ease-in-out infinite; }
@keyframes gifBounce{ 50%{ transform: translateY(-8px) scale(1.03); } }

/* gradient winner text + shine streak overlay */
.winner-text{
  font-size:1.25rem; font-weight:900;
  background: linear-gradient(90deg,#ff6b6b,#feca57,#48dbfb,#5f27cd);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-size:200% 100%;
  animation: gradientShift 3s linear infinite;
  position:relative;
}
@keyframes gradientShift{ 0%{ background-position:0% 0% } 100%{ background-position:200% 0% } }

/* tiny shine streak */
.winner-text::after{
  content:"";
  position:absolute; inset:0;
  background: linear-gradient(120deg, rgba(255,255,255,0.0) 0%, rgba(255,255,255,0.35) 50%, rgba(255,255,255,0.0) 100%);
  transform: translateX(-120%);
  animation: shine 2.2s linear infinite;
  pointer-events:none;
}
@keyframes shine{ 0%{ transform: translateX(-120%); } 100%{ transform: translateX(120%); } }

/* ---------------------------
   BUTTON (RIPPLE)
   --------------------------- */
button{
  margin-top:16px;
  padding:10px 18px;
  background:var(--accent);
  border:none; border-radius:12px; font-weight:800; cursor:pointer;
  position:relative; overflow:hidden; box-shadow: 0 8px 18px rgba(0,0,0,0.24);
}
button::after{
  content:""; position:absolute; width:0; height:0; border-radius:50%; background:rgba(255,255,255,0.45);
  transform: translate(-50%,-50%); opacity:0; pointer-events:none;
}
button:hover::after{
  width:220px; height:220px; opacity:0.38; transition: width 0.6s ease, height 0.6s ease, opacity 0.6s;
  left: var(--x); top: var(--y);
}

/* ---------------------------
   FULL-SCREEN PULSE
   --------------------------- */
.fullscreen-celebration{
  position:fixed; inset:0; pointer-events:none; z-index:9000;
  background: radial-gradient(circle at center, rgba(255,255,255,0.12), transparent 30%);
  animation: screenPulse 2.2s ease-in-out infinite;
}
@keyframes screenPulse{ 0%{ opacity:0.08 } 50%{ opacity:0.32 } 100%{ opacity:0.08 } }

/* ---------------------------
   FIREWORKS (dots expand)
   --------------------------- */
.fireworks{ position:fixed; inset:0; z-index:9998; pointer-events:none; }
.firework-dot{
  position:absolute; width:10px; height:10px; border-radius:50%;
  transform-origin:center center;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,0.25));
  animation: fwExplode 1.4s ease-out forwards;
}
@keyframes fwExplode{
  0%{ transform: scale(0.25); opacity:1; filter: blur(0px); }
  55%{ transform: scale(3.6); opacity:0.95; filter: blur(1px); }
  100%{ transform: scale(0.9); opacity:0; filter: blur(2px); }
}

/* ---------------------------
   CRACKERS (radial bursts)
   --------------------------- */
.crackers-wrapper{
  position:absolute;
  left:50%;
  top: calc(50% - 220px); /* place above board - tweak if needed */
  transform:translateX(-50%);
  width:100%;
  height: 120px;
  pointer-events:none;
  z-index:9997;
}
.cracker{
  position:absolute;
  top:20px;
  width:8px; height:8px; border-radius:50%;
  transform-origin:center center;
  animation: crackerBurst 900ms ease-out forwards;
}
.cracker::after{
  content:"";
  position:absolute;
  left:50%; top:50%;
  width:3px; height:3px; border-radius:50%;
  background:transparent;
}
@keyframes crackerBurst{
  0%{ transform: scale(0.2) translateY(0); opacity:1; box-shadow: none; }
  20%{ transform: scale(1) translateY(-6px); opacity:1; }
  40%{ transform: scale(1.2) translateY(-30px); opacity:0.95; box-shadow: 0 0 8px rgba(255,255,255,0.8); }
  100%{ transform: scale(0.6) translateY(-90px); opacity:0; box-shadow: none; }
}
/* create radial particle lines for each cracker using pseudo-elements */
.cracker::before{
  content:"";
  position:absolute; left:50%; top:50%; width:0; height:0;
  transform-origin:center;
  border-radius:50%;
  box-shadow:
    0 -18px 0 0 rgba(255,99,71,0.95),
    12px -14px 0 0 rgba(255,215,64,0.95),
    -12px -14px 0 0 rgba(88, 216, 163,0.95),
    18px -6px 0 0 rgba(135, 65, 204,0.95),
    -18px -6px 0 0 rgba(66, 135, 245,0.95);
  opacity:0; transform: scale(0.2);
  animation: crackerLines 880ms ease-out forwards;
}
@keyframes crackerLines{
  0%{ opacity:0; transform: scale(0.2); }
  30%{ opacity:1; transform: scale(1); }
  100%{ opacity:0; transform: scale(1.4); }
}

/* ---------------------------
   SPARKLES (centered, subtle)
   --------------------------- */
.sparkles{
  position:absolute;
  left:50%;
  top: calc(50% - 40px);
  transform: translateX(-50%);
  width:220px;
  height:120px;
  pointer-events:none;
  z-index:9996;
}
.sparkles::before, .sparkles::after{
  content:"";
  position:absolute;
  width:60px; height:60px; border-radius:50%;
  background: radial-gradient(circle, rgba(255,255,255,0.9), transparent 40%);
  filter: blur(10px);
  opacity:0;
  transform: scale(0.6);
}
.sparkles::before{ left: 10%; top: 20%; animation: sparklePop 1s ease-out forwards; }
.sparkles::after{ right: 10%; top: 10%; animation: sparklePop 1s ease-out 0.25s forwards; }
@keyframes sparklePop{
  0%{ opacity:0; transform: scale(0.4); }
  30%{ opacity:1; transform: scale(1); }
  100%{ opacity:0; transform: scale(1.4); }
}

/* ---------------------------
   CONFETTI (multi emoji span)
   --------------------------- */
.confetti-wrapper{ position:absolute; left:50%; top: calc(50% - 110px); transform:translateX(-50%); width:100%; height:240px; pointer-events:none; z-index:9995; }
.confetti{ position:absolute; font-size:1.5rem; animation: confettiFall 1.7s linear forwards; opacity:0; }
@keyframes confettiFall{
  0%{ transform: translateY(-10px) rotate(0deg); opacity:1; }
  30%{ opacity:1; }
  100%{ transform: translateY(160px) rotate(360deg); opacity:0; }
}

/* small utility */
.fadeIn{ animation: fadeIn 0.8s ease both; }
@keyframes fadeIn{ from{ opacity:0; transform: translateY(6px);} to{ opacity:1; transform:none;} }

/* responsiveness */
@media (max-width:420px){
  .game-wrapper{ margin:14px; padding:14px; }
  .avatar{ width:48px; height:48px; }
  .winner-gif{ width:120px; }
  .confetti{ font-size:1.2rem; }
  .sparkles{ width:160px; left:50%; top: calc(50% - 60px); }
}
